import"./modulepreload-polyfill-B5Qt9EMX.js";const Oe=e=>{const t=new ArrayBuffer(8),n=new Uint8Array(t);let s=e;for(let i=7;i>=0&&s!==0;i--)n[i]=s&255,s-=n[i],s/=256;return n};function je(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function Lt(e,t=""){if(!Number.isSafeInteger(e)||e<0){const n=t&&`"${t}" `;throw new Error(`${n}expected integer >= 0, got ${e}`)}}function tt(e,t,n=""){const s=je(e),i=e?.length,a=t!==void 0;if(!s||a&&i!==t){const o=n&&`"${n}" `,c=a?` of length ${t}`:"",l=s?`length=${i}`:`type=${typeof e}`;throw new Error(o+"expected Uint8Array"+c+", got "+l)}return e}function _e(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash must wrapped by utils.createHasher");Lt(e.outputLen),Lt(e.blockLen)}function et(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function fe(e,t){tt(e,void 0,"digestInto() output");const n=t.outputLen;if(e.length<n)throw new Error('"digestInto() output" expected to be of length >='+n)}function Re(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}function $(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}function jt(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function D(e,t){return e<<32-t|e>>>t}function _t(e,t){return e<<t|e>>>32-t>>>0}const Ge=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function Ve(e){return e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255}function Ke(e){for(let t=0;t<e.length;t++)e[t]=Ve(e[t]);return e}const te=Ge?e=>e:Ke;function it(e,t={}){const n=(i,a)=>e(a).update(i).digest(),s=e(void 0);return n.outputLen=s.outputLen,n.blockLen=s.blockLen,n.create=i=>e(i),Object.assign(n,t),Object.freeze(n)}const W=e=>({oid:Uint8Array.from([6,9,96,134,72,1,101,3,4,2,e])});class he{update(t){return et(this),this.iHash.update(t),this}digestInto(t){et(this),tt(t,this.outputLen,"output"),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:s,finished:i,destroyed:a,blockLen:o,outputLen:c}=this;return t=t,t.finished=i,t.destroyed=a,t.blockLen=o,t.outputLen=c,t.oHash=n._cloneInto(t.oHash),t.iHash=s._cloneInto(t.iHash),t}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}constructor(t,n){if(this.finished=!1,this.destroyed=!1,_e(t),tt(n,void 0,"key"),this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(n.length>s?t.create().update(n).digest():n);for(let a=0;a<i.length;a++)i[a]^=54;this.iHash.update(i),this.oHash=t.create();for(let a=0;a<i.length;a++)i[a]^=106;this.oHash.update(i),$(i)}}const Rt=(e,t,n)=>new he(e,t).update(n).digest();Rt.create=(e,t)=>new he(e,t);function pe(e,t,n){return e&t^~e&n}function ge(e,t,n){return e&t^e&n^t&n}class zt{update(t){et(this),tt(t);const{view:n,buffer:s,blockLen:i}=this,a=t.length;for(let o=0;o<a;){const c=Math.min(i-this.pos,a-o);if(c===i){const l=jt(t);for(;i<=a-o;o+=i)this.process(l,o);continue}s.set(t.subarray(o,o+c),this.pos),this.pos+=c,o+=c,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){et(this),fe(t,this),this.finished=!0;const{buffer:n,view:s,blockLen:i,isLE:a}=this;let{pos:o}=this;n[o++]=128,$(this.buffer.subarray(o)),this.padOffset>i-o&&(this.process(s,0),o=0);for(let u=o;u<i;u++)n[u]=0;s.setBigUint64(i-8,BigInt(this.length*8),a),this.process(s,0);const c=jt(t),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen must be aligned to 32bit");const f=l/4,d=this.get();if(f>d.length)throw new Error("_sha2: outputLen bigger than state");for(let u=0;u<f;u++)c.setUint32(4*u,d[u],a)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const s=t.slice(0,n);return this.destroy(),s}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:s,length:i,finished:a,destroyed:o,pos:c}=this;return t.destroyed=o,t.finished=a,t.length=i,t.pos=c,i%n&&t.buffer.set(s),t}clone(){return this._cloneInto()}constructor(t,n,s,i){this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=t,this.outputLen=n,this.padOffset=s,this.isLE=i,this.buffer=new Uint8Array(t),this.view=jt(this.buffer)}}const O=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),j=Uint32Array.from([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]),L=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),E=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),rt=Uint32Array.from([1732584193,4023233417,2562383102,271733878,3285377520]),_=new Uint32Array(80);class ze extends zt{get(){const{A:t,B:n,C:s,D:i,E:a}=this;return[t,n,s,i,a]}set(t,n,s,i,a){this.A=t|0,this.B=n|0,this.C=s|0,this.D=i|0,this.E=a|0}process(t,n){for(let l=0;l<16;l++,n+=4)_[l]=t.getUint32(n,!1);for(let l=16;l<80;l++)_[l]=_t(_[l-3]^_[l-8]^_[l-14]^_[l-16],1);let{A:s,B:i,C:a,D:o,E:c}=this;for(let l=0;l<80;l++){let f,d;l<20?(f=pe(i,a,o),d=1518500249):l<40?(f=i^a^o,d=1859775393):l<60?(f=ge(i,a,o),d=2400959708):(f=i^a^o,d=3395469782);const u=_t(s,5)+f+c+d+_[l]|0;c=o,o=a,a=_t(i,30),i=s,s=u}s=s+this.A|0,i=i+this.B|0,a=a+this.C|0,o=o+this.D|0,c=c+this.E|0,this.set(s,i,a,o,c)}roundClean(){$(_)}destroy(){this.set(0,0,0,0,0),$(this.buffer)}constructor(){super(64,20,8,!1),this.A=rt[0]|0,this.B=rt[1]|0,this.C=rt[2]|0,this.D=rt[3]|0,this.E=rt[4]|0}}const We=it(()=>new ze),bt=BigInt(2**32-1),ee=BigInt(32);function Je(e,t=!1){return t?{h:Number(e&bt),l:Number(e>>ee&bt)}:{h:Number(e>>ee&bt)|0,l:Number(e&bt)|0}}function be(e,t=!1){const n=e.length;let s=new Uint32Array(n),i=new Uint32Array(n);for(let a=0;a<n;a++){const{h:o,l:c}=Je(e[a],t);[s[a],i[a]]=[o,c]}return[s,i]}const ne=(e,t,n)=>e>>>n,se=(e,t,n)=>e<<32-n|t>>>n,Q=(e,t,n)=>e>>>n|t<<32-n,X=(e,t,n)=>e<<32-n|t>>>n,mt=(e,t,n)=>e<<64-n|t>>>n-32,wt=(e,t,n)=>e>>>n-32|t<<64-n,qe=(e,t,n)=>e<<n|t>>>32-n,Qe=(e,t,n)=>t<<n|e>>>32-n,Xe=(e,t,n)=>t<<n-32|e>>>64-n,Ye=(e,t,n)=>e<<n-32|t>>>64-n;function M(e,t,n,s){const i=(t>>>0)+(s>>>0);return{h:e+n+(i/2**32|0)|0,l:i|0}}const Ze=(e,t,n)=>(e>>>0)+(t>>>0)+(n>>>0),tn=(e,t,n,s)=>t+n+s+(e/2**32|0)|0,en=(e,t,n,s)=>(e>>>0)+(t>>>0)+(n>>>0)+(s>>>0),nn=(e,t,n,s,i)=>t+n+s+i+(e/2**32|0)|0,sn=(e,t,n,s,i)=>(e>>>0)+(t>>>0)+(n>>>0)+(s>>>0)+(i>>>0),an=(e,t,n,s,i,a)=>t+n+s+i+a+(e/2**32|0)|0,on=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),R=new Uint32Array(64);class me extends zt{get(){const{A:t,B:n,C:s,D:i,E:a,F:o,G:c,H:l}=this;return[t,n,s,i,a,o,c,l]}set(t,n,s,i,a,o,c,l){this.A=t|0,this.B=n|0,this.C=s|0,this.D=i|0,this.E=a|0,this.F=o|0,this.G=c|0,this.H=l|0}process(t,n){for(let u=0;u<16;u++,n+=4)R[u]=t.getUint32(n,!1);for(let u=16;u<64;u++){const h=R[u-15],p=R[u-2],b=D(h,7)^D(h,18)^h>>>3,x=D(p,17)^D(p,19)^p>>>10;R[u]=x+R[u-7]+b+R[u-16]|0}let{A:s,B:i,C:a,D:o,E:c,F:l,G:f,H:d}=this;for(let u=0;u<64;u++){const h=D(c,6)^D(c,11)^D(c,25),p=d+h+pe(c,l,f)+on[u]+R[u]|0,x=(D(s,2)^D(s,13)^D(s,22))+ge(s,i,a)|0;d=f,f=l,l=c,c=o+p|0,o=a,a=i,i=s,s=p+x|0}s=s+this.A|0,i=i+this.B|0,a=a+this.C|0,o=o+this.D|0,c=c+this.E|0,l=l+this.F|0,f=f+this.G|0,d=d+this.H|0,this.set(s,i,a,o,c,l,f,d)}roundClean(){$(R)}destroy(){this.set(0,0,0,0,0,0,0,0),$(this.buffer)}constructor(t){super(64,t,8,!1)}}class rn extends me{constructor(){super(32),this.A=O[0]|0,this.B=O[1]|0,this.C=O[2]|0,this.D=O[3]|0,this.E=O[4]|0,this.F=O[5]|0,this.G=O[6]|0,this.H=O[7]|0}}class cn extends me{constructor(){super(28),this.A=j[0]|0,this.B=j[1]|0,this.C=j[2]|0,this.D=j[3]|0,this.E=j[4]|0,this.F=j[5]|0,this.G=j[6]|0,this.H=j[7]|0}}const we=be(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),ln=we[0],dn=we[1],G=new Uint32Array(80),V=new Uint32Array(80);class ye extends zt{get(){const{Ah:t,Al:n,Bh:s,Bl:i,Ch:a,Cl:o,Dh:c,Dl:l,Eh:f,El:d,Fh:u,Fl:h,Gh:p,Gl:b,Hh:x,Hl:P}=this;return[t,n,s,i,a,o,c,l,f,d,u,h,p,b,x,P]}set(t,n,s,i,a,o,c,l,f,d,u,h,p,b,x,P){this.Ah=t|0,this.Al=n|0,this.Bh=s|0,this.Bl=i|0,this.Ch=a|0,this.Cl=o|0,this.Dh=c|0,this.Dl=l|0,this.Eh=f|0,this.El=d|0,this.Fh=u|0,this.Fl=h|0,this.Gh=p|0,this.Gl=b|0,this.Hh=x|0,this.Hl=P|0}process(t,n){for(let y=0;y<16;y++,n+=4)G[y]=t.getUint32(n),V[y]=t.getUint32(n+=4);for(let y=16;y<80;y++){const T=G[y-15]|0,N=V[y-15]|0,Mt=Q(T,N,1)^Q(T,N,8)^ne(T,N,7),Tt=X(T,N,1)^X(T,N,8)^se(T,N,7),U=G[y-2]|0,F=V[y-2]|0,pt=Q(U,F,19)^mt(U,F,61)^ne(U,F,6),Nt=X(U,F,19)^wt(U,F,61)^se(U,F,6),gt=en(Tt,Nt,V[y-7],V[y-16]),Ot=nn(gt,Mt,pt,G[y-7],G[y-16]);G[y]=Ot|0,V[y]=gt|0}let{Ah:s,Al:i,Bh:a,Bl:o,Ch:c,Cl:l,Dh:f,Dl:d,Eh:u,El:h,Fh:p,Fl:b,Gh:x,Gl:P,Hh:at,Hl:ot}=this;for(let y=0;y<80;y++){const T=Q(u,h,14)^Q(u,h,18)^mt(u,h,41),N=X(u,h,14)^X(u,h,18)^wt(u,h,41),Mt=u&p^~u&x,Tt=h&b^~h&P,U=sn(ot,N,Tt,dn[y],V[y]),F=an(U,at,T,Mt,ln[y],G[y]),pt=U|0,Nt=Q(s,i,28)^mt(s,i,34)^mt(s,i,39),gt=X(s,i,28)^wt(s,i,34)^wt(s,i,39),Ot=s&a^s&c^a&c,Ne=i&o^i&l^o&l;at=x|0,ot=P|0,x=p|0,P=b|0,p=u|0,b=h|0,{h:u,l:h}=M(f|0,d|0,F|0,pt|0),f=c|0,d=l|0,c=a|0,l=o|0,a=s|0,o=i|0;const Zt=Ze(pt,gt,Ne);s=tn(Zt,F,Nt,Ot),i=Zt|0}({h:s,l:i}=M(this.Ah|0,this.Al|0,s|0,i|0)),{h:a,l:o}=M(this.Bh|0,this.Bl|0,a|0,o|0),{h:c,l}=M(this.Ch|0,this.Cl|0,c|0,l|0),{h:f,l:d}=M(this.Dh|0,this.Dl|0,f|0,d|0),{h:u,l:h}=M(this.Eh|0,this.El|0,u|0,h|0),{h:p,l:b}=M(this.Fh|0,this.Fl|0,p|0,b|0),{h:x,l:P}=M(this.Gh|0,this.Gl|0,x|0,P|0),{h:at,l:ot}=M(this.Hh|0,this.Hl|0,at|0,ot|0),this.set(s,i,a,o,c,l,f,d,u,h,p,b,x,P,at,ot)}roundClean(){$(G,V)}destroy(){$(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}constructor(t){super(128,t,16,!1)}}class un extends ye{constructor(){super(64),this.Ah=E[0]|0,this.Al=E[1]|0,this.Bh=E[2]|0,this.Bl=E[3]|0,this.Ch=E[4]|0,this.Cl=E[5]|0,this.Dh=E[6]|0,this.Dl=E[7]|0,this.Eh=E[8]|0,this.El=E[9]|0,this.Fh=E[10]|0,this.Fl=E[11]|0,this.Gh=E[12]|0,this.Gl=E[13]|0,this.Hh=E[14]|0,this.Hl=E[15]|0}}class fn extends ye{constructor(){super(48),this.Ah=L[0]|0,this.Al=L[1]|0,this.Bh=L[2]|0,this.Bl=L[3]|0,this.Ch=L[4]|0,this.Cl=L[5]|0,this.Dh=L[6]|0,this.Dl=L[7]|0,this.Eh=L[8]|0,this.El=L[9]|0,this.Fh=L[10]|0,this.Fl=L[11]|0,this.Gh=L[12]|0,this.Gl=L[13]|0,this.Hh=L[14]|0,this.Hl=L[15]|0}}const hn=it(()=>new rn,W(1)),pn=it(()=>new cn,W(4)),gn=it(()=>new un,W(3)),bn=it(()=>new fn,W(2)),mn=BigInt(0),ct=BigInt(1),wn=BigInt(2),yn=BigInt(7),xn=BigInt(256),vn=BigInt(113),xe=[],ve=[],Ae=[];for(let e=0,t=ct,n=1,s=0;e<24;e++){[n,s]=[s,(2*n+3*s)%5],xe.push(2*(5*s+n)),ve.push((e+1)*(e+2)/2%64);let i=mn;for(let a=0;a<7;a++)t=(t<<ct^(t>>yn)*vn)%xn,t&wn&&(i^=ct<<(ct<<BigInt(a))-ct);Ae.push(i)}const Le=be(Ae,!0),An=Le[0],Ln=Le[1],ie=(e,t,n)=>n>32?Xe(e,t,n):qe(e,t,n),ae=(e,t,n)=>n>32?Ye(e,t,n):Qe(e,t,n);function En(e,t=24){const n=new Uint32Array(10);for(let s=24-t;s<24;s++){for(let o=0;o<10;o++)n[o]=e[o]^e[o+10]^e[o+20]^e[o+30]^e[o+40];for(let o=0;o<10;o+=2){const c=(o+8)%10,l=(o+2)%10,f=n[l],d=n[l+1],u=ie(f,d,1)^n[c],h=ae(f,d,1)^n[c+1];for(let p=0;p<50;p+=10)e[o+p]^=u,e[o+p+1]^=h}let i=e[2],a=e[3];for(let o=0;o<24;o++){const c=ve[o],l=ie(i,a,c),f=ae(i,a,c),d=xe[o];i=e[d],a=e[d+1],e[d]=l,e[d+1]=f}for(let o=0;o<50;o+=10){for(let c=0;c<10;c++)n[c]=e[o+c];for(let c=0;c<10;c++)e[o+c]^=~n[(c+2)%10]&n[(c+4)%10]}e[0]^=An[s],e[1]^=Ln[s]}$(n)}class Wt{clone(){return this._cloneInto()}keccak(){te(this.state32),En(this.state32,this.rounds),te(this.state32),this.posOut=0,this.pos=0}update(t){et(this),tt(t);const{blockLen:n,state:s}=this,i=t.length;for(let a=0;a<i;){const o=Math.min(n-this.pos,i-a);for(let c=0;c<o;c++)s[this.pos++]^=t[a++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:n,pos:s,blockLen:i}=this;t[s]^=n,(n&128)!==0&&s===i-1&&this.keccak(),t[i-1]^=128,this.keccak()}writeInto(t){et(this,!1),tt(t),this.finish();const n=this.state,{blockLen:s}=this;for(let i=0,a=t.length;i<a;){this.posOut>=s&&this.keccak();const o=Math.min(s-this.posOut,a-i);t.set(n.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return Lt(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(fe(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,$(this.state)}_cloneInto(t){const{blockLen:n,suffix:s,outputLen:i,rounds:a,enableXOF:o}=this;return t||(t=new Wt(n,s,i,o,a)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=a,t.suffix=s,t.outputLen=i,t.enableXOF=o,t.destroyed=this.destroyed,t}constructor(t,n,s,i=!1,a=24){if(this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=t,this.suffix=n,this.outputLen=s,this.enableXOF=i,this.rounds=a,Lt(s,"outputLen"),!(0<t&&t<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=Re(this.state)}}const Pt=(e,t,n,s={})=>it(()=>new Wt(t,e,n),s),kn=Pt(6,144,28,W(7)),Sn=Pt(6,136,32,W(8)),Cn=Pt(6,104,48,W(9)),In=Pt(6,72,64,W(10)),nt=(()=>{if(typeof globalThis=="object")return globalThis;Object.defineProperty(Object.prototype,"__GLOBALTHIS__",{get(){return this},configurable:!0});try{if(typeof __GLOBALTHIS__<"u")return __GLOBALTHIS__}finally{delete Object.prototype.__GLOBALTHIS__}if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global})(),oe={SHA1:We,SHA224:pn,SHA256:hn,SHA384:bn,SHA512:gn,"SHA3-224":kn,"SHA3-256":Sn,"SHA3-384":Cn,"SHA3-512":In},Jt=e=>{switch(!0){case/^(?:SHA-?1|SSL3-SHA1)$/i.test(e):return"SHA1";case/^SHA(?:2?-)?224$/i.test(e):return"SHA224";case/^SHA(?:2?-)?256$/i.test(e):return"SHA256";case/^SHA(?:2?-)?384$/i.test(e):return"SHA384";case/^SHA(?:2?-)?512$/i.test(e):return"SHA512";case/^SHA3-224$/i.test(e):return"SHA3-224";case/^SHA3-256$/i.test(e):return"SHA3-256";case/^SHA3-384$/i.test(e):return"SHA3-384";case/^SHA3-512$/i.test(e):return"SHA3-512";default:throw new TypeError(`Unknown hash algorithm: ${e}`)}},re=(e,t,n)=>{if(Rt){const s=oe[e]??oe[Jt(e)];return Rt(s,t,n)}else throw new Error("Missing HMAC function")},Gt="ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",Hn=e=>{e=e.replace(/ /g,"");let t=e.length;for(;e[t-1]==="=";)--t;e=(t<e.length?e.substring(0,t):e).toUpperCase();const n=new ArrayBuffer(e.length*5/8|0),s=new Uint8Array(n);let i=0,a=0,o=0;for(let c=0;c<e.length;c++){const l=Gt.indexOf(e[c]);if(l===-1)throw new TypeError(`Invalid character found: ${e[c]}`);a=a<<5|l,i+=5,i>=8&&(i-=8,s[o++]=a>>>i)}return s},Pn=e=>{let t=0,n=0,s="";for(let i=0;i<e.length;i++)for(n=n<<8|e[i],t+=8;t>=5;)s+=Gt[n>>>t-5&31],t-=5;return t>0&&(s+=Gt[n<<5-t&31]),s},Dn=e=>{e=e.replace(/ /g,"");const t=new ArrayBuffer(e.length/2),n=new Uint8Array(t);for(let s=0;s<e.length;s+=2)n[s/2]=parseInt(e.substring(s,s+2),16);return n},Bn=e=>{let t="";for(let n=0;n<e.length;n++){const s=e[n].toString(16);s.length===1&&(t+="0"),t+=s}return t.toUpperCase()},$n=e=>{const t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let s=0;s<e.length;s++)n[s]=e.charCodeAt(s)&255;return n},Un=e=>{let t="";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t},ce=nt.TextEncoder?new nt.TextEncoder:null,le=nt.TextDecoder?new nt.TextDecoder:null,Fn=e=>{if(!ce)throw new Error("Encoding API not available");return ce.encode(e)},Mn=e=>{if(!le)throw new Error("Encoding API not available");return le.decode(e)},Tn=e=>{if(nt.crypto?.getRandomValues)return nt.crypto.getRandomValues(new Uint8Array(e));throw new Error("Cryptography API not available")};class B{static fromLatin1(t){return new B({buffer:$n(t).buffer})}static fromUTF8(t){return new B({buffer:Fn(t).buffer})}static fromBase32(t){return new B({buffer:Hn(t).buffer})}static fromHex(t){return new B({buffer:Dn(t).buffer})}get buffer(){return this.bytes.buffer}get latin1(){return Object.defineProperty(this,"latin1",{enumerable:!0,writable:!1,configurable:!1,value:Un(this.bytes)}),this.latin1}get utf8(){return Object.defineProperty(this,"utf8",{enumerable:!0,writable:!1,configurable:!1,value:Mn(this.bytes)}),this.utf8}get base32(){return Object.defineProperty(this,"base32",{enumerable:!0,writable:!1,configurable:!1,value:Pn(this.bytes)}),this.base32}get hex(){return Object.defineProperty(this,"hex",{enumerable:!0,writable:!1,configurable:!1,value:Bn(this.bytes)}),this.hex}constructor({buffer:t,size:n=20}={}){this.bytes=typeof t>"u"?Tn(n):new Uint8Array(t),Object.defineProperty(this,"bytes",{enumerable:!0,writable:!1,configurable:!1,value:this.bytes})}}const Nn=(e,t)=>{{if(e.length!==t.length)throw new TypeError("Input strings must have the same length");let n=-1,s=0;for(;++n<e.length;)s|=e.charCodeAt(n)^t.charCodeAt(n);return s===0}};class A{static get defaults(){return{issuer:"",label:"OTPAuth",issuerInLabel:!0,algorithm:"SHA1",digits:6,counter:0,window:1}}static generate({secret:t,algorithm:n=A.defaults.algorithm,digits:s=A.defaults.digits,counter:i=A.defaults.counter,hmac:a=re}){const o=Oe(i),c=a(n,t.bytes,o);if(!c?.byteLength||c.byteLength<19)throw new TypeError("Return value must be at least 19 bytes");const l=c[c.byteLength-1]&15;return(((c[l]&127)<<24|(c[l+1]&255)<<16|(c[l+2]&255)<<8|c[l+3]&255)%10**s).toString().padStart(s,"0")}generate({counter:t=this.counter++}={}){return A.generate({secret:this.secret,algorithm:this.algorithm,digits:this.digits,counter:t,hmac:this.hmac})}static validate({token:t,secret:n,algorithm:s,digits:i=A.defaults.digits,counter:a=A.defaults.counter,window:o=A.defaults.window,hmac:c=re}){if(t.length!==i)return null;let l=null;const f=d=>{const u=A.generate({secret:n,algorithm:s,digits:i,counter:d,hmac:c});Nn(t,u)&&(l=d-a)};f(a);for(let d=1;d<=o&&l===null&&(f(a-d),!(l!==null||(f(a+d),l!==null)));++d);return l}validate({token:t,counter:n=this.counter,window:s}){return A.validate({token:t,secret:this.secret,algorithm:this.algorithm,digits:this.digits,counter:n,window:s,hmac:this.hmac})}toString(){const t=encodeURIComponent;return`otpauth://hotp/${this.issuer.length>0?this.issuerInLabel?`${t(this.issuer)}:${t(this.label)}?issuer=${t(this.issuer)}&`:`${t(this.label)}?issuer=${t(this.issuer)}&`:`${t(this.label)}?`}secret=${t(this.secret.base32)}&algorithm=${t(this.algorithm)}&digits=${t(this.digits)}&counter=${t(this.counter)}`}constructor({issuer:t=A.defaults.issuer,label:n=A.defaults.label,issuerInLabel:s=A.defaults.issuerInLabel,secret:i=new B,algorithm:a=A.defaults.algorithm,digits:o=A.defaults.digits,counter:c=A.defaults.counter,hmac:l}={}){this.issuer=t,this.label=n,this.issuerInLabel=s,this.secret=typeof i=="string"?B.fromBase32(i):i,this.algorithm=l?a:Jt(a),this.digits=o,this.counter=c,this.hmac=l}}class v{static get defaults(){return{issuer:"",label:"OTPAuth",issuerInLabel:!0,algorithm:"SHA1",digits:6,period:30,window:1}}static counter({period:t=v.defaults.period,timestamp:n=Date.now()}={}){return Math.floor(n/1e3/t)}counter({timestamp:t=Date.now()}={}){return v.counter({period:this.period,timestamp:t})}static remaining({period:t=v.defaults.period,timestamp:n=Date.now()}={}){return t*1e3-n%(t*1e3)}remaining({timestamp:t=Date.now()}={}){return v.remaining({period:this.period,timestamp:t})}static generate({secret:t,algorithm:n,digits:s,period:i=v.defaults.period,timestamp:a=Date.now(),hmac:o}){return A.generate({secret:t,algorithm:n,digits:s,counter:v.counter({period:i,timestamp:a}),hmac:o})}generate({timestamp:t=Date.now()}={}){return v.generate({secret:this.secret,algorithm:this.algorithm,digits:this.digits,period:this.period,timestamp:t,hmac:this.hmac})}static validate({token:t,secret:n,algorithm:s,digits:i,period:a=v.defaults.period,timestamp:o=Date.now(),window:c,hmac:l}){return A.validate({token:t,secret:n,algorithm:s,digits:i,counter:v.counter({period:a,timestamp:o}),window:c,hmac:l})}validate({token:t,timestamp:n,window:s}){return v.validate({token:t,secret:this.secret,algorithm:this.algorithm,digits:this.digits,period:this.period,timestamp:n,window:s,hmac:this.hmac})}toString(){const t=encodeURIComponent;return`otpauth://totp/${this.issuer.length>0?this.issuerInLabel?`${t(this.issuer)}:${t(this.label)}?issuer=${t(this.issuer)}&`:`${t(this.label)}?issuer=${t(this.issuer)}&`:`${t(this.label)}?`}secret=${t(this.secret.base32)}&algorithm=${t(this.algorithm)}&digits=${t(this.digits)}&period=${t(this.period)}`}constructor({issuer:t=v.defaults.issuer,label:n=v.defaults.label,issuerInLabel:s=v.defaults.issuerInLabel,secret:i=new B,algorithm:a=v.defaults.algorithm,digits:o=v.defaults.digits,period:c=v.defaults.period,hmac:l}={}){this.issuer=t,this.label=n,this.issuerInLabel=s,this.secret=typeof i=="string"?B.fromBase32(i):i,this.algorithm=l?a:Jt(a),this.digits=o,this.period=c,this.hmac=l}}async function On(e,t={}){const{digits:n=6,period:s=30,algorithm:i="SHA1"}=t,a=e.replace(/\s/g,"").toUpperCase();if(!Et(a))throw new Error("Invalid Base32 secret key");try{return new v({secret:B.fromBase32(a),digits:n,period:s,algorithm:i}).generate()}catch(o){throw console.error("[TOTP] Generation error:",o),new Error("Failed to generate TOTP code: "+o.message)}}function jn(e=30){return e-Math.floor(Date.now()/1e3)%e}function _n(e){return e?e.length===6?`${e.slice(0,3)} ${e.slice(3)}`:e.length===8?`${e.slice(0,4)} ${e.slice(4)}`:e:"--- ---"}function Et(e){if(!e||typeof e!="string")return!1;const t=e.toUpperCase().replace(/\s/g,"").replace(/=+$/,"");return/^[A-Z2-7]+$/.test(t)&&t.length>=8}const qt=new TextEncoder,Rn=new TextDecoder;let yt=null;function Vt(e){return crypto.getRandomValues(new Uint8Array(e))}function dt(e){return btoa(String.fromCharCode(...e))}function vt(e){return Uint8Array.from(atob(e),t=>t.charCodeAt(0))}async function Ee(e,t){const n=await crypto.subtle.importKey("raw",qt.encode(e),"PBKDF2",!1,["deriveKey"]);return crypto.subtle.deriveKey({name:"PBKDF2",salt:t,iterations:31e4,hash:"SHA-256"},n,{name:"AES-GCM",length:256},!1,["encrypt","decrypt"])}async function ke(){if(yt)return yt;const e=chrome.runtime.id||"azkura-auth",t=navigator.userAgent||"unknown",n=`${screen.width}x${screen.height}`,s=`${e}:${t}:${n}:azkura-default-key-v1`,a=new TextEncoder().encode(s),o=await crypto.subtle.digest("SHA-256",a),c=Array.from(new Uint8Array(o));return yt=btoa(String.fromCharCode(...c)),yt}async function Dt(e,t){const n=t||await ke(),s=Vt(16),i=Vt(12),a=await Ee(n,s),o=await crypto.subtle.encrypt({name:"AES-GCM",iv:i},a,qt.encode(e));return{salt:dt(s),iv:dt(i),ciphertext:dt(new Uint8Array(o)),version:1}}async function Se(e,t){const n=t||await ke(),s=vt(e.salt),i=vt(e.iv),a=vt(e.ciphertext),o=await Ee(n,s);try{const c=await crypto.subtle.decrypt({name:"AES-GCM",iv:i},o,a);return Rn.decode(c)}catch{throw new Error("Incorrect PIN/password or corrupted data")}}async function Ce(e,t){const n=await crypto.subtle.importKey("raw",qt.encode(e),"PBKDF2",!1,["deriveBits"]),s=await crypto.subtle.deriveBits({name:"PBKDF2",salt:t,iterations:1e5,hash:"SHA-256"},n,256);return dt(new Uint8Array(s))}async function Ie(e,t,n){const s=vt(n);return await Ce(e,s)===t}async function Qt(e){const t=Vt(16);return{hash:await Ce(e,t),salt:dt(t)}}function He(e){if(!e||typeof e!="string")throw new Error("Invalid URI: must be a string");const t=e.trim();if(!t.startsWith("otpauth://"))throw new Error("Invalid URI: must start with otpauth://");let n;try{n=new URL(t)}catch{throw new Error("Invalid URI: malformed URL")}const s=n.hostname.toLowerCase();if(s!=="totp"&&s!=="hotp")throw new Error(`Unsupported OTP type: ${s}`);const i=decodeURIComponent(n.pathname.slice(1));let a="",o=i;if(i.includes(":")){const h=i.indexOf(":");a=i.slice(0,h).trim(),o=i.slice(h+1).trim()}const c=n.searchParams;c.get("issuer")&&(a=c.get("issuer"));const l=c.get("secret");if(!l)throw new Error("Invalid URI: missing secret parameter");const f=(c.get("algorithm")||"SHA1").toUpperCase(),d=parseInt(c.get("digits")||"6",10),u=parseInt(c.get("period")||"30",10);return{type:s,issuer:a||o.split("@")[1]||"Unknown",account:o,secret:l.replace(/\s/g,"").toUpperCase(),algorithm:f,digits:isNaN(d)?6:d,period:isNaN(u)?30:u}}async function I(e){return new Promise(t=>{chrome.storage.local.get(e,n=>t(n[e]))})}async function z(e,t){return new Promise(n=>{chrome.storage.local.set({[e]:t},n)})}async function de(e){return new Promise(t=>{chrome.storage.local.remove(e,t)})}async function Gn(){return new Promise(e=>{chrome.storage.local.clear(e)})}async function Pe(e){return new Promise(t=>{chrome.storage.session.get(e,n=>t(n[e]))})}async function Vn(e,t){return new Promise(n=>{chrome.storage.session.set({[e]:t},n)})}async function De(){return new Promise(e=>{chrome.storage.session.clear(e)})}async function Kn(e){return new Promise(t=>{chrome.storage.sync.get(e,n=>t(n[e]))})}async function Be(e,t){return new Promise(n=>{chrome.storage.sync.set({[e]:t},n)})}async function Xt(){return!!await I("pinData")}async function zn(){const e=await Kn("pinEnabled");return e===void 0?await Xt():e}async function kt(e){return Be("pinEnabled",e)}async function Wn(){const e=await Pe("accounts");return Array.isArray(e)}async function Jn(){const e=await I("pinData"),t=await I("vault");return!e&&!t}async function Bt(){return Pe("accounts")}async function st(e){return Vn("accounts",e)}async function qn(){const e={accentColor:"#00E5FF",autoLockMinutes:5,privacyMode:!1,compactLayout:!1,closeAfterCopy:!0,autoFocusSearch:!0,pinEnabled:!0},t=await new Promise(n=>{chrome.storage.sync.get(Object.keys(e),s=>n(s))});return{...e,...t}}async function Y(e,t){return Be(e,t)}const Qn="https://www.googleapis.com/oauth2/v2/userinfo",ft="googleAuthToken",$t="googleUserProfile";async function $e(){const e=await I(ft),t=await I($t);return!!(e&&t)}async function Xn(){return await I($t)}async function Yn(){return await I(ft)}async function Zn(){try{const e=await new Promise((n,s)=>{chrome.identity.getAuthToken({interactive:!0},i=>{chrome.runtime.lastError?s(new Error(chrome.runtime.lastError.message)):i?n(i):s(new Error("No token received"))})});await z(ft,e);const t=await es(e);if(!t)throw new Error("Failed to fetch user profile");return await z($t,t),{success:!0,user:t}}catch(e){return console.error("[Google Auth] Login failed:",e),{success:!1,error:e.message}}}async function ts(){try{const e=await I(ft);return e&&await new Promise(t=>{chrome.identity.removeCachedAuthToken({token:e},t)}),await de(ft),await de($t),{success:!0}}catch(e){return console.error("[Google Auth] Logout failed:",e),{success:!1,error:e.message}}}async function es(e){try{const t=await fetch(Qn,{headers:{Authorization:`Bearer ${e}`,Accept:"application/json"}});if(!t.ok)throw new Error(`HTTP ${t.status}`);const n=await t.json();return{name:n.name||"Google User",email:n.email||"",picture:n.picture||null,id:n.id||""}}catch(t){return console.error("[Google Auth] Fetch profile failed:",t),null}}const ns="https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart";async function ss(e,t=null){try{const n=await Yn();if(!n)return{success:!1,error:"Not authenticated with Google"};const s=new Date().toISOString().slice(0,19).replace(/[:T]/g,"-"),i=t||`azkura-backup-${s}.json`,a={app:"azkura-auth",version:chrome.runtime.getManifest().version,exportedAt:new Date().toISOString(),accountCount:e.length,accounts:e},o=JSON.stringify(a,null,2),c="-------314159265358979323846",l=`\r
--${c}\r
`,f=`\r
--${c}--`,d={name:i,mimeType:"application/json",description:"Azkura Auth Backup - TOTP Authenticator Data"},u=l+`Content-Type: application/json; charset=UTF-8\r
\r
`+JSON.stringify(d)+l+`Content-Type: application/json\r
\r
`+o+f,h=await fetch(ns,{method:"POST",headers:{Authorization:`Bearer ${n}`,"Content-Type":`multipart/related; boundary="${c}"`},body:u});if(!h.ok){const b=await h.json().catch(()=>({}));throw new Error(b.error?.message||`HTTP ${h.status}`)}return{success:!0,fileId:(await h.json()).id,fileName:i}}catch(n){return console.error("[Google Drive] Upload failed:",n),{success:!1,error:n.message||"Failed to upload backup"}}}function Ue(){return`${Date.now()}-${Math.random().toString(36).slice(2,9)}`}function is(e){const t=(e||"").toLowerCase(),n={discord:{bg:"#5865F2",emoji:"üéÆ"},github:{bg:"#24292e",emoji:"üêô"},google:{bg:"#4285F4",emoji:"üîµ"},gmail:{bg:"#EA4335",emoji:"üìß"},aws:{bg:"#FF9900",emoji:"‚òÅÔ∏è"},amazon:{bg:"#FF9900",emoji:"üì¶"},stripe:{bg:"#6772E5",emoji:"üí≥"},twitter:{bg:"#1DA1F2",emoji:"üê¶"},x:{bg:"#000000",emoji:"‚úñÔ∏è"},facebook:{bg:"#1877F2",emoji:"üìò"},instagram:{bg:"#E1306C",emoji:"üì∑"},microsoft:{bg:"#00A4EF",emoji:"ü™ü"},apple:{bg:"#555555",emoji:"üçé"},gitlab:{bg:"#FC6D26",emoji:"ü¶ä"},dropbox:{bg:"#0061FF",emoji:"üì¶"},slack:{bg:"#4A154B",emoji:"üí¨"},twitch:{bg:"#9146FF",emoji:"üéÆ"},reddit:{bg:"#FF4500",emoji:"ü§ñ"},linkedin:{bg:"#0A66C2",emoji:"üíº"},cloudflare:{bg:"#F48120",emoji:"‚òÅÔ∏è"},digitalocean:{bg:"#0080FF",emoji:"üåä"},bitwarden:{bg:"#175DDC",emoji:"üîê"},binance:{bg:"#F0B90B",emoji:"‚Çø"},coinbase:{bg:"#0052FF",emoji:"ü™ô"}};for(const[a,o]of Object.entries(n))if(t.includes(a))return o;let s=0;for(const a of e||"A")s=s*31+a.charCodeAt(0)&4294967295;return{bg:`hsl(${Math.abs(s)%360}, 60%, 40%)`,emoji:null}}async function St(e){const t=await I("vault");if(!t)return await st([]),[];const n=await Se(t,e),s=JSON.parse(n);return await st(s),s}async function Ut(e){const t=await Bt();if(!t)return;const n=JSON.stringify(t),s=await Dt(n,e);await z("vault",s)}async function as(){await De()}async function H(){return await Bt()||[]}async function os(e,t){const n=await H(),s={id:Ue(),issuer:e.issuer||"",account:e.account||"",secret:e.secret.replace(/\s/g,"").toUpperCase(),algorithm:e.algorithm||"SHA1",digits:e.digits||6,period:e.period||30,createdAt:Date.now()};return n.push(s),await st(n),await Ut(t),s}async function rs(e,t,n){const s=await H(),i=s.findIndex(a=>a.id===e);if(i===-1)throw new Error("Account not found");return s[i]={...s[i],...t,id:e,updatedAt:Date.now()},t.secret&&(s[i].secret=t.secret.replace(/\s/g,"").toUpperCase()),await st(s),await Ut(n),s[i]}async function cs(e,t){const s=(await H()).filter(i=>i.id!==e);await st(s),await Ut(t)}async function ls(e){const t=await H();if(!e||!e.trim())return t;const n=e.toLowerCase();return t.filter(s=>(s.issuer||"").toLowerCase().includes(n)||(s.account||"").toLowerCase().includes(n))}async function ds(e){const t=await H(),n=JSON.stringify(t),s=await Dt(n,e),i={app:"azkura-auth",version:"1.0.0",exportedAt:new Date().toISOString(),accountCount:t.length,encrypted:s};return JSON.stringify(i,null,2)}async function us(e,t,n){let s;try{s=JSON.parse(e)}catch{throw new Error("Invalid backup file: not valid JSON")}if(s.app!=="azkura-auth")throw new Error("Invalid backup file: not an Azkura Auth backup");const i=await Se(s.encrypted,t),a=JSON.parse(i);if(!Array.isArray(a))throw new Error("Invalid backup: corrupted account data");const o=await H(),c=new Set(o.map(d=>d.secret+d.account)),l=a.filter(d=>!c.has(d.secret+d.account)),f=[...o,...l.map(d=>({...d,id:Ue()}))];return await st(f),await Ut(n),{imported:l.length,total:f.length}}async function fs(){await Gn(),await De()}let C=null,ut=null,k=[],g={},Z=null,xt=null;const r=e=>document.querySelector(e),Ft=e=>document.querySelectorAll(e);function K(e){Ft(".view").forEach(t=>t.classList.remove("active")),r(e).classList.add("active")}function S(e){r(e).classList.add("open")}function w(e){r(e).classList.remove("open")}function m(e,t="info",n=2500){const s=r("#toastContainer"),i={success:"‚úì",error:"‚úï",info:"‚Ñπ"},a=document.createElement("div");a.className=`toast ${t}`,a.innerHTML=`<span class="toast-icon">${i[t]||"‚Ñπ"}</span><span class="toast-text">${e}</span>`,s.appendChild(a),setTimeout(()=>{a.classList.add("out"),setTimeout(()=>a.remove(),400)},n)}function Kt(e,t,n,s){const i=r(`#${e}`),a=r(`#${t}`),o=s?r(`#${s}`):null;let c="";const l=6,f=["1","2","3","4","5","6","7","8","9","","0","‚å´"],d={2:"ABC",3:"DEF",4:"GHI",5:"JKL",6:"MNO",7:"PQRS",8:"TUV",9:"WXYZ",0:"+"};i.innerHTML="",f.forEach(p=>{const b=document.createElement("button");if(b.className="pin-key",!p){b.style.visibility="hidden",i.appendChild(b);return}b.innerHTML=`<span>${p}</span>${d[p]?`<span class="pin-key-sub">${d[p]}</span>`:""}`,b.addEventListener("click",()=>{p==="‚å´"?c=c.slice(0,-1):c.length<l&&(c+=p),u(),c.length===l&&setTimeout(()=>{n(c),c="",u()},80)}),i.appendChild(b)});function u(){a.querySelectorAll(".pin-dot").forEach((b,x)=>{b.classList.toggle("filled",x<c.length),b.classList.remove("error")}),o&&o.classList.remove("visible")}function h(p){c="",u();const b=a.querySelectorAll(".pin-dot");b.forEach(x=>x.classList.add("error")),o&&p&&(o.textContent=p,o.classList.add("visible")),setTimeout(()=>b.forEach(x=>x.classList.remove("error")),600)}return{flashError:h}}function Fe(){const e=r("#onboardStep1"),t=r("#onboardStep2"),n=r("#onboardStep3");function s(a){["#step1dot","#step2dot","#step3dot"].forEach((o,c)=>{const l=r(o);l.classList.remove("active","done"),c+1===a&&l.classList.add("active"),c+1<a&&l.classList.add("done")})}r("#btnOnboardStart").addEventListener("click",()=>{e.style.display="none",t.style.display="flex",s(2)}),r("#btnBackToWelcome").addEventListener("click",()=>{t.style.display="none",e.style.display="flex",s(1),xt=null}),r("#btnSkipPin").addEventListener("click",async()=>{await kt(!1),C=null,await St(null),K("#viewMain"),await It(),m("PIN skipped. You can enable it later in Settings.","info",3e3)}),Kt("pinKeypadCreate","pinDotsCreate",a=>{xt=a,t.style.display="none",n.style.display="flex",s(3)},"pinCreateError");const{flashError:i}=Kt("pinKeypadConfirm","pinDotsConfirm",async a=>{if(a!==xt){i("PINs do not match. Try again."),xt=null,setTimeout(()=>{n.style.display="none",t.style.display="flex",s(2)},700);return}const o=await Qt(a);await z("pinData",o),await kt(!0),C=a,await St(a).catch(()=>{}),s(3),K("#viewMain"),await It()},"pinConfirmError")}function hs(){const{flashError:e}=Kt("pinKeypadLock","pinDotsLock",async t=>{try{const n=await I("pinData");if(!await Ie(t,n.hash,n.salt)){e("Incorrect PIN. Try again.");return}C=t,await St(t),K("#viewMain"),await It(),Yt()}catch{e("Unlock failed. Try again.")}},"pinLockError")}function Yt(){const e=g.autoLockMinutes;!e||e===0||chrome.alarms.create("auto-lock",{delayInMinutes:e})}function ht(){g.autoLockMinutes&&g.autoLockMinutes>0&&chrome.alarms.create("auto-lock",{delayInMinutes:g.autoLockMinutes})}function J(){document.documentElement.style.setProperty("--accent",g.accentColor||"#00E5FF");const e=g.accentColor||"#00E5FF";document.documentElement.style.setProperty("--accent-dim",`${e}26`),document.documentElement.style.setProperty("--accent-dim2",`${e}14`),document.documentElement.style.setProperty("--border-accent",`${e}4D`),document.getElementById("app").classList.toggle("privacy-mode",!!g.privacyMode),document.getElementById("app").classList.toggle("layout-compact",!!g.compactLayout);const t=r("#privacyModeToggle"),n=r("#compactLayoutToggle"),s=r("#closeAfterCopyToggle"),i=r("#autoFocusSearchToggle"),a=r("#autoLockSelect"),o=r("#pinProtectionToggle");t&&(t.checked=!!g.privacyMode),n&&(n.checked=!!g.compactLayout),s&&(s.checked=g.closeAfterCopy!==!1),i&&(i.checked=g.autoFocusSearch!==!1),a&&(a.value=String(g.autoLockMinutes??5)),o&&(o.checked=!!g.pinEnabled),Ft("#accentColorPicker .color-swatch").forEach(c=>{c.classList.toggle("active",c.dataset.color===e)}),ps()}function ps(){const e=g.pinEnabled,t=r("#btnChangePIN"),n=r("#autoLockItem"),s=r("#pinDisabledWarning");t&&(t.style.display=e?"flex":"none"),n&&(n.style.display=e?"flex":"none"),s&&(s.style.display=e?"none":"flex")}function gs(e){const i=2*Math.PI*14.5,a=document.createElement("div");return a.className="progress-ring",a.innerHTML=`
    <svg width="32" height="32" viewBox="0 0 32 32">
      <circle class="progress-ring-track" cx="${32/2}" cy="${32/2}" r="${14.5}" stroke-width="3"/>
      <circle class="progress-ring-fill" cx="${32/2}" cy="${32/2}" r="${14.5}" stroke-width="3"
        stroke-dasharray="${i}" stroke-dashoffset="${i}" stroke="var(--totp-normal)"/>
    </svg>
    <div class="progress-ring-text">30</div>
  `,a._circumference=i,a._period=e,a}function bs(e,t,n){const s=e.querySelector(".progress-ring-fill"),i=e.querySelector(".progress-ring-text"),a=e._circumference,o=t/n,c=a*(1-o);s.style.strokeDashoffset=c;let l,f;t>10?(l="var(--totp-normal)",f=""):t>5?(l="var(--totp-warning)",f="warning"):(l="var(--totp-danger)",f="danger"),s.style.stroke=l,i.textContent=t,i.className=`progress-ring-text ${f}`}function ms(e){const t=is(e.issuer),n=document.createElement("div");n.className="account-card",n.dataset.id=e.id;const s=document.createElement("div");if(s.className="service-icon",s.style.background=t.bg,t.emoji)s.textContent=t.emoji;else{const d=document.createElement("span");d.className="service-icon-letter",d.textContent=(e.issuer||e.account||"?")[0].toUpperCase(),s.appendChild(d)}const i=document.createElement("div");i.className="account-info",i.innerHTML=`
    <div class="account-issuer">${Ct(e.issuer||"Unknown")}</div>
    <div class="account-label">${Ct(e.account||"")}</div>
  `;const a=document.createElement("div");a.className="account-code-wrapper";const o=document.createElement("div");o.className="account-code",o.textContent="--- ---";const c=gs(e.period||30);a.appendChild(o),a.appendChild(c);const l=document.createElement("div");l.className="copy-flash";const f=document.createElement("div");return f.className="card-actions",f.innerHTML=`
    <button class="card-action-btn" data-action="edit" title="Edit">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/></svg>
    </button>
    <button class="card-action-btn delete" data-action="delete" title="Delete">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="3 6 5 6 21 6"/><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v2"/></svg>
    </button>
  `,n.appendChild(s),n.appendChild(i),n.appendChild(a),n.appendChild(l),n.appendChild(f),n.addEventListener("click",d=>{d.target.closest("[data-action]")||ws(e.id,o,l,n)}),f.addEventListener("click",d=>{const u=d.target.closest("[data-action]");u&&(d.stopPropagation(),u.dataset.action==="edit"&&Es(e.id),u.dataset.action==="delete"&&Ss(e.id,e.issuer,e.account))}),n._codeEl=o,n._ringEl=c,n._account=e,n}function Ct(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}async function ws(e,t,n,s){const i=t.textContent.replace(/\s/g,"");try{await navigator.clipboard.writeText(i),n.classList.remove("animate"),n.offsetWidth,n.classList.add("animate"),s.classList.add("copied"),setTimeout(()=>s.classList.remove("copied"),800),m("Code copied!","success",1500),ht(),g.closeAfterCopy&&setTimeout(()=>window.close(),700)}catch{m("Failed to copy","error")}}async function It(){g=await qn(),J(),k=await H(),q(k),ys(),g.autoFocusSearch&&setTimeout(()=>r("#searchInput")?.focus(),100),await At()}function q(e){const t=r("#accountsList");if(t.innerHTML="",!e||e.length===0){const n=r("#searchInput")?.value||"";t.innerHTML=`
      <div class="accounts-empty">
        <div class="accounts-empty-icon">${n?"üîç":"üîê"}</div>
        <div class="accounts-empty-title">${n?"No results":"No accounts yet"}</div>
        <div class="accounts-empty-sub">${n?`No accounts match "${Ct(n)}"`:"Tap the + button to add your first TOTP account"}</div>
      </div>
    `;return}e.forEach(n=>{const s=ms(n);t.appendChild(s)}),Me()}async function Me(){const e=Ft(".account-card");for(const t of e){const n=t._account;if(!n)continue;const s=jn(n.period||30);try{const i=await On(n.secret,{digits:n.digits||6,period:n.period||30,algorithm:n.algorithm||"SHA1"});t._codeEl.textContent=_n(i),t._codeEl.classList.remove("warning","danger"),s<=5?t._codeEl.classList.add("danger"):s<=10&&t._codeEl.classList.add("warning"),bs(t._ringEl,s,n.period||30)}catch{t._codeEl.textContent="Error"}}}function ys(){ut&&clearInterval(ut),ut=setInterval(Me,1e3)}function xs(){const e=r("#searchInput"),t=r("#searchClear");e.addEventListener("input",async()=>{const n=e.value.trim();t.classList.toggle("visible",n.length>0);const s=await ls(n);q(s),ht()}),t.addEventListener("click",()=>{e.value="",t.classList.remove("visible"),q(k),e.focus()})}function vs(){const e=r("#fabBtn"),t=r("#fabMenu");e.addEventListener("click",()=>{const n=t.classList.toggle("open");e.classList.toggle("open",n)}),document.addEventListener("click",n=>{n.target.closest("#fabContainer")||(t.classList.remove("open"),e.classList.remove("open"))}),r("#btnManualEntry").addEventListener("click",()=>{t.classList.remove("open"),e.classList.remove("open"),Ht(),S("#modalAddAccount")}),r("#btnUploadQR").addEventListener("click",()=>{t.classList.remove("open"),e.classList.remove("open");const n=document.createElement("input");n.type="file",n.accept="image/*",n.addEventListener("change",s=>{const i=s.target.files[0];i&&As(i)}),n.click()}),r("#btnScanQR").addEventListener("click",()=>{t.classList.remove("open"),e.classList.remove("open"),chrome.tabs.create({url:chrome.runtime.getURL("src/scanner/scanner.html")})})}async function As(e){try{const t=new Image,n=URL.createObjectURL(e);t.src=n,await new Promise((l,f)=>{t.onload=l,t.onerror=f});const s=document.createElement("canvas");s.width=t.naturalWidth,s.height=t.naturalHeight;const i=s.getContext("2d");i.drawImage(t,0,0);const a=i.getImageData(0,0,s.width,s.height);URL.revokeObjectURL(n);let o=null;if("BarcodeDetector"in window)try{const f=await new BarcodeDetector({formats:["qr_code"]}).detect(t);f.length>0&&(o=f[0].rawValue)}catch{}if(!o){m("QR scan failed. Try manual entry.","error"),Ht(),S("#modalAddAccount");return}const c=He(o);Te(c),S("#modalAddAccount")}catch(t){m("Could not read QR code: "+t.message,"error"),Ht(),S("#modalAddAccount")}}function Te(e){r("#addIssuer").value=e.issuer||"",r("#addAccount").value=e.account||"",r("#addSecret").value=e.secret||"",r("#addAlgorithm").value=e.algorithm||"SHA1",r("#addDigits").value=String(e.digits||6),r("#addPeriod").value=String(e.period||30)}function Ht(){r("#addIssuer").value="",r("#addAccount").value="",r("#addSecret").value="",r("#addAlgorithm").value="SHA1",r("#addDigits").value="6",r("#addPeriod").value="30",r("#addSecretError").classList.remove("visible")}function Ls(){r("#closeModalAdd").addEventListener("click",()=>w("#modalAddAccount")),r("#modalAddAccount").addEventListener("click",e=>{e.target===e.currentTarget&&w("#modalAddAccount")}),r("#addSecret").addEventListener("blur",()=>{const e=r("#addSecret").value,t=r("#addSecretError");e&&!Et(e)?(r("#addSecret").classList.add("error"),t.classList.add("visible")):(r("#addSecret").classList.remove("error"),t.classList.remove("visible"))}),r("#btnAddAccountSubmit").addEventListener("click",async()=>{const e=r("#addIssuer").value.trim(),t=r("#addAccount").value.trim(),n=r("#addSecret").value.trim(),s=r("#addAlgorithm").value,i=parseInt(r("#addDigits").value),a=parseInt(r("#addPeriod").value);if(!n||!Et(n)){r("#addSecret").classList.add("error"),r("#addSecretError").classList.add("visible");return}if(!t&&!e){m("Please enter an account name or issuer","error");return}try{r("#btnAddAccountSubmit").disabled=!0;const o=await os({issuer:e,account:t,secret:n,algorithm:s,digits:i,period:a},C);k=await H(),q(k),w("#modalAddAccount"),Ht(),m(`${e||t} added!`,"success"),ht()}catch(o){m("Failed to add account: "+o.message,"error")}finally{r("#btnAddAccountSubmit").disabled=!1}})}function Es(e){const t=k.find(n=>n.id===e);t&&(r("#editAccountId").value=t.id,r("#editIssuer").value=t.issuer||"",r("#editAccountName").value=t.account||"",r("#editSecret").value=t.secret||"",r("#editAlgorithm").value=t.algorithm||"SHA1",r("#editDigits").value=String(t.digits||6),S("#modalEditAccount"))}function ks(){r("#closeModalEdit").addEventListener("click",()=>w("#modalEditAccount")),r("#modalEditAccount").addEventListener("click",e=>{e.target===e.currentTarget&&w("#modalEditAccount")}),r("#toggleSecretVisibility").addEventListener("click",()=>{const e=r("#editSecret");e.type=e.type==="password"?"text":"password"}),r("#btnEditAccountSubmit").addEventListener("click",async()=>{const e=r("#editAccountId").value,t=r("#editIssuer").value.trim(),n=r("#editAccountName").value.trim(),s=r("#editSecret").value.trim(),i=r("#editAlgorithm").value,a=parseInt(r("#editDigits").value);if(!s||!Et(s)){m("Invalid secret key","error");return}try{r("#btnEditAccountSubmit").disabled=!0,await rs(e,{issuer:t,account:n,secret:s,algorithm:i,digits:a},C),k=await H(),q(k),w("#modalEditAccount"),m("Account updated!","success"),ht()}catch(o){m("Failed to update: "+o.message,"error")}finally{r("#btnEditAccountSubmit").disabled=!1}})}let lt=null;function Ss(e,t,n){lt=e;const s=`Delete <strong>${Ct(t||n)}</strong>? This will permanently remove the account and its TOTP secret.`;r("#deleteConfirmText").innerHTML=s,r("#deleteAccountId").value=e,S("#modalDeleteConfirm")}function Cs(){r("#btnDeleteCancel").addEventListener("click",()=>{w("#modalDeleteConfirm"),lt=null}),r("#modalDeleteConfirm").addEventListener("click",e=>{e.target===e.currentTarget&&w("#modalDeleteConfirm")}),r("#btnDeleteConfirm").addEventListener("click",async()=>{if(lt)try{await cs(lt,C),k=await H(),q(k),w("#modalDeleteConfirm"),m("Account deleted","info"),lt=null,ht()}catch(e){m("Failed to delete: "+e.message,"error")}})}function Is(){const e=r("#btnProfile"),t=r("#profileMenuOverlay");e.addEventListener("click",()=>{t.classList.toggle("open")&&At()}),t.addEventListener("click",n=>{n.target===t&&t.classList.remove("open")}),r("#btnLoginGoogle").addEventListener("click",async()=>{const n=await Zn();n.success?(m(`Welcome, ${n.user.name}!`,"success"),await At(),t.classList.remove("open")):m("Login failed: "+n.error,"error")}),r("#btnLogoutGoogle").addEventListener("click",async()=>{(await ts()).success&&(m("Signed out","info"),await At(),t.classList.remove("open"))}),r("#btnBackupToDrive").addEventListener("click",async()=>{t.classList.remove("open"),await ue()}),r("#btnBackupDriveSettings")?.addEventListener("click",async()=>{w("#modalSettings"),await ue()})}async function At(){const e=r("#profileMenuLoggedOut"),t=r("#profileMenuLoggedIn"),n=r("#btnBackupDriveSettings");if(await $e()){const i=await Xn();if(i){r("#userDisplayName").textContent=i.name,r("#userEmail").textContent=i.email;const a=r("#userProfilePicture");i.picture?(a.src=i.picture,a.style.display="block"):a.style.display="none";const o=r("#profileAvatar");i.picture&&(o.innerHTML=`<img src="${i.picture}" alt="Profile" />`)}e.style.display="none",t.style.display="block",n&&(n.style.display="flex")}else e.style.display="block",t.style.display="none",n&&(n.style.display="none"),r("#profileAvatar").innerHTML=`
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
        <circle cx="12" cy="7" r="4"/>
      </svg>
    `}async function ue(){if(!await $e()){m("Please sign in with Google first","error");return}m("Backing up to Drive...","info");const e=await ss(k);e.success?m(`Backup saved: ${e.fileName}`,"success",3e3):m("Backup failed: "+e.error,"error")}function Hs(){r("#btnSettings").addEventListener("click",()=>{J(),S("#modalSettings")}),r("#closeModalSettings").addEventListener("click",()=>w("#modalSettings")),r("#modalSettings").addEventListener("click",e=>{e.target===e.currentTarget&&w("#modalSettings")}),r("#pinProtectionToggle").addEventListener("change",async e=>{const t=e.target.checked;if(t&&!await Xt()){w("#modalSettings"),Ps();return}g.pinEnabled=t,await kt(t),J(),m(t?"PIN protection enabled":"PIN protection disabled","info")}),r("#privacyModeToggle").addEventListener("change",async e=>{g.privacyMode=e.target.checked,await Y("privacyMode",g.privacyMode),J()}),r("#compactLayoutToggle").addEventListener("change",async e=>{g.compactLayout=e.target.checked,await Y("compactLayout",g.compactLayout),J()}),r("#closeAfterCopyToggle").addEventListener("change",async e=>{g.closeAfterCopy=e.target.checked,await Y("closeAfterCopy",g.closeAfterCopy)}),r("#autoFocusSearchToggle").addEventListener("change",async e=>{g.autoFocusSearch=e.target.checked,await Y("autoFocusSearch",g.autoFocusSearch)}),r("#autoLockSelect").addEventListener("change",async e=>{g.autoLockMinutes=parseInt(e.target.value),await Y("autoLockMinutes",g.autoLockMinutes),Yt()}),Ft("#accentColorPicker .color-swatch").forEach(e=>{e.addEventListener("click",async()=>{const t=e.dataset.color;g.accentColor=t,await Y("accentColor",t),J()})}),r("#btnLockNow").addEventListener("click",async()=>{await as(),C=null,w("#modalSettings"),K("#viewLock"),ut&&clearInterval(ut)}),r("#btnChangePIN").addEventListener("click",()=>{r("#currentPin").value="",r("#newPin").value="",r("#confirmNewPin").value="",r("#changePinError").classList.remove("visible"),S("#modalChangePin")}),r("#closeModalChangePin").addEventListener("click",()=>w("#modalChangePin")),r("#btnChangePinConfirm").addEventListener("click",async()=>{const e=r("#currentPin").value,t=r("#newPin").value,n=r("#confirmNewPin").value,s=r("#changePinError");if(t.length<4){s.textContent="PIN must be at least 4 digits",s.classList.add("visible");return}if(t!==n){s.textContent="New PINs do not match",s.classList.add("visible");return}try{const i=await I("pinData");if(!await Ie(e,i.hash,i.salt)){s.textContent="Current PIN is incorrect",s.classList.add("visible");return}const o=await Bt(),c=await Qt(t);if(await z("pinData",c),o){const l=JSON.stringify(o),f=await Dt(l,t);await z("vault",f)}C=t,w("#modalChangePin"),m("PIN updated successfully!","success")}catch(i){s.textContent="Failed: "+i.message,s.classList.add("visible")}}),r("#btnExportData").addEventListener("click",()=>{r("#exportPassword").value="",r("#exportPasswordConfirm").value="",r("#exportPasswordError").classList.remove("visible"),S("#modalExportPassword")}),r("#closeModalExport").addEventListener("click",()=>w("#modalExportPassword")),r("#btnExportConfirm").addEventListener("click",async()=>{const e=r("#exportPassword").value,t=r("#exportPasswordConfirm").value,n=r("#exportPasswordError");if(!e){n.textContent="Please enter a password",n.classList.add("visible");return}if(e!==t){n.textContent="Passwords do not match",n.classList.add("visible");return}try{r("#btnExportConfirm").disabled=!0;const s=await ds(e),i=new Blob([s],{type:"application/json"}),a=URL.createObjectURL(i),o=document.createElement("a");o.href=a,o.download=`azkura-backup-${new Date().toISOString().slice(0,10)}.json`,o.click(),URL.revokeObjectURL(a),w("#modalExportPassword"),m("Backup exported!","success")}catch(s){n.textContent="Export failed: "+s.message,n.classList.add("visible")}finally{r("#btnExportConfirm").disabled=!1}}),r("#importFileInput").addEventListener("change",e=>{Z=e.target.files[0],Z&&(r("#importPassword").value="",r("#importPasswordError").classList.remove("visible"),r("#importFileInfo").textContent=`File: ${Z.name}. Enter the backup password.`,S("#modalImportPassword"),e.target.value="")}),r("#closeModalImport").addEventListener("click",()=>w("#modalImportPassword")),r("#btnImportConfirm").addEventListener("click",async()=>{if(!Z)return;const e=r("#importPassword").value,t=r("#importPasswordError");if(!e){t.textContent="Please enter the backup password",t.classList.add("visible");return}try{r("#btnImportConfirm").disabled=!0;const n=await Z.text(),s=await us(n,e,C);k=await H(),q(k),w("#modalImportPassword"),w("#modalSettings"),m(`Imported ${s.imported} account(s)!`,"success"),Z=null}catch(n){t.textContent=n.message,t.classList.add("visible")}finally{r("#btnImportConfirm").disabled=!1}}),r("#btnDeleteAll").addEventListener("click",()=>{r("#deleteAllConfirmInput").value="",r("#btnDeleteAllConfirm").disabled=!0,S("#modalDeleteAll")}),r("#btnDeleteAllCancel").addEventListener("click",()=>w("#modalDeleteAll")),r("#deleteAllConfirmInput").addEventListener("input",e=>{r("#btnDeleteAllConfirm").disabled=e.target.value!=="DELETE"}),r("#btnDeleteAllConfirm").addEventListener("click",async()=>{if(r("#deleteAllConfirmInput").value==="DELETE")try{await fs(),k=[],C=null,w("#modalDeleteAll"),w("#modalSettings"),m("All data deleted","info",2e3),setTimeout(()=>{K("#viewOnboarding"),Fe()},500)}catch(e){m("Failed to delete: "+e.message,"error")}})}async function Ps(){r("#currentPin").closest(".form-group").style.display="none",r("#newPin").placeholder="Create PIN",r("#confirmNewPin").placeholder="Confirm PIN",r("#changePinError").classList.remove("visible"),r("#btnChangePinConfirm").onclick,r("#btnChangePinConfirm").onclick=async()=>{const e=r("#newPin").value,t=r("#confirmNewPin").value,n=r("#changePinError");if(e.length<4){n.textContent="PIN must be at least 4 digits",n.classList.add("visible");return}if(e!==t){n.textContent="PINs do not match",n.classList.add("visible");return}try{const s=await Qt(e);await z("pinData",s),await kt(!0),g.pinEnabled=!0,C=e;const i=await Bt();if(i){const a=JSON.stringify(i),o=await Dt(a,e);await z("vault",o)}w("#modalChangePin"),m("PIN protection enabled!","success"),J(),setTimeout(()=>{r("#currentPin").closest(".form-group").style.display="block",r("#newPin").placeholder="",r("#confirmNewPin").placeholder=""},300)}catch(s){n.textContent="Failed: "+s.message,n.classList.add("visible")}},S("#modalChangePin")}async function Ds(){Fe(),hs(),xs(),vs(),Ls(),ks(),Cs(),Hs(),Is();const e=await Jn(),t=await Xt(),n=await zn(),s=await Wn();e?K("#viewOnboarding"):t&&n&&!s?K("#viewLock"):(C=null,s||await St(null),K("#viewMain"),await It(),n&&Yt()),chrome.storage.session.get("pendingQR",async i=>{if(i.pendingQR){chrome.storage.session.remove("pendingQR");const a=He(i.pendingQR);Te(a),S("#modalAddAccount")}})}Ds().catch(console.error);
