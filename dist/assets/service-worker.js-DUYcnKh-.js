chrome.runtime.onInstalled.addListener(async e=>{e.reason==="install"?console.log("[Azkura] Extension installed"):e.reason==="update"&&console.log("[Azkura] Extension updated to",chrome.runtime.getManifest().version)});chrome.alarms.onAlarm.addListener(async e=>{e.name==="auto-lock"&&(await chrome.storage.session.clear(),console.log("[Azkura] Auto-locked vault"),chrome.action.setBadgeText({text:"ðŸ”’"}),chrome.action.setBadgeBackgroundColor({color:"#333333"}))});chrome.runtime.onMessage.addListener((e,n,t)=>{if(e.type==="QR_SCANNED"&&chrome.runtime.sendMessage(e).catch(()=>{chrome.storage.session.set({pendingQR:e.data})}),e.type==="RESET_AUTOLOCK"){const o=e.minutes;o&&o>0&&chrome.alarms.create("auto-lock",{delayInMinutes:o})}return!1});chrome.action.onClicked.addListener(()=>{chrome.action.setBadgeText({text:""})});
